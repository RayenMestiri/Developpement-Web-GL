<div class="etudiant-container">
  <h1>Atelier Guid√© : Affichage Ma√Ætre/D√©tail</h1>
  <p class="subtitle">Gestion des √©tudiants avec *ngFor, *ngIf et [ngClass]</p>

  <div class="content-grid">
    <!-- Vue Ma√Ætre : Liste des √©tudiants -->
    <div class="master-view">
      <h2>Liste des √âtudiants</h2>
      
      <!-- 
        *ngFor : Directive de r√©p√©tition
        - It√®re sur le tableau 'etuds'
        - 'e1' est la variable locale repr√©sentant chaque √©tudiant
        - 'let i = index' r√©cup√®re l'index de l'√©l√©ment (commence √† 0)
      -->
      <ul class="etudiants">
        <li 
          *ngFor="let e1 of etuds; let i = index"
          [class.selected]="e1 === selectedEtudiant"
          (click)="onSelect(e1)"
          class="etudiant-item"
        >
          <!-- 
            Badge avec l'ID de l'√©tudiant
            La classe 'badge' est d√©finie dans le CSS
          -->
          <span class="badge">{{ e1.id }}</span>
          
          <!-- 
            Nom de l'√©tudiant avec interpolation
          -->
          <span class="nom">{{ e1.name }}</span>
          
          <!-- 
            Classe si elle existe (propri√©t√© optionnelle)
          -->
          <span *ngIf="e1.classe" class="classe">{{ e1.classe }}</span>
        </li>
      </ul>

      <div class="stats">
        <p>Total d'√©tudiants : <strong>{{ etuds.length }}</strong></p>
      </div>
    </div>

    <!-- Vue D√©tail : D√©tails de l'√©tudiant s√©lectionn√© -->
    <div class="detail-view">
      <h2>D√©tails de l'√âtudiant</h2>
      
      <!-- 
        *ngIf : Affichage conditionnel
        Affiche les d√©tails UNIQUEMENT si un √©tudiant est s√©lectionn√©
        Sans *ngIf, on aurait une erreur si selectedEtudiant n'est pas d√©fini
      -->
      <div *ngIf="selectedEtudiant; else noSelection" class="details-card">
        <div class="detail-header">
          <div class="avatar">{{ selectedEtudiant.name.charAt(0) }}</div>
          <h3>{{ selectedEtudiant.name }}</h3>
        </div>

        <div class="detail-body">
          <div class="detail-row">
            <span class="label">ID:</span>
            <span class="value">{{ selectedEtudiant.id }}</span>
          </div>

          <div class="detail-row">
            <span class="label">Nom:</span>
            <span class="value">{{ selectedEtudiant.name }}</span>
          </div>

          <!-- Affiche la classe si elle existe -->
          <div class="detail-row" *ngIf="selectedEtudiant.classe">
            <span class="label">Classe:</span>
            <span class="value">{{ selectedEtudiant.classe }}</span>
          </div>

          <!-- Nombre de lettres dans le nom (exemple d'expression) -->
          <div class="detail-row">
            <span class="label">Lettres dans le nom:</span>
            <span class="value">{{ selectedEtudiant.name.length }}</span>
          </div>
        </div>

        <div class="detail-footer">
          <button (click)="selectedEtudiant = undefined!" class="btn-clear">
            ‚úñ D√©s√©lectionner
          </button>
        </div>
      </div>

      <!-- 
        ng-template avec #noSelection
        Template alternatif affich√© quand aucun √©tudiant n'est s√©lectionn√©
        Utilis√© avec *ngIf...else
      -->
      <ng-template #noSelection>
        <div class="no-selection">
          <div class="no-selection-icon">üëÜ</div>
          <h3>Aucun √©tudiant s√©lectionn√©</h3>
          <p>Cliquez sur un √©tudiant dans la liste pour voir ses d√©tails</p>
        </div>
      </ng-template>
    </div>
  </div>

  <!-- Section d'explication -->
  <div class="explanation">
    <h3>üìö Concepts d√©montr√©s</h3>
    
    <div class="concept-grid">
      <div class="concept-card">
        <h4>*ngFor avec index</h4>
        <pre><code>*ngFor="let e1 of etuds; let i = index"</code></pre>
        <p>It√®re sur chaque √©tudiant et fournit l'index.</p>
      </div>

      <div class="concept-card">
        <h4>*ngIf avec else</h4>
        <pre><code>*ngIf="selectedEtudiant; else noSelection"</code></pre>
        <p>Affiche les d√©tails si un √©tudiant est s√©lectionn√©, sinon affiche le template alternatif.</p>
      </div>

      <div class="concept-card">
        <h4>[class.selected]</h4>
        <pre><code>[class.selected]="e1 === selectedEtudiant"</code></pre>
        <p>Applique la classe CSS 'selected' si l'√©tudiant est s√©lectionn√©.</p>
      </div>

      <div class="concept-card">
        <h4>Event Binding (click)</h4>
        <pre><code>(click)="onSelect(e1)"</code></pre>
        <p>Appelle la m√©thode onSelect() quand on clique sur un √©tudiant.</p>
      </div>
    </div>

    <div class="question-section">
      <h4>‚ùì Questions du TP</h4>
      <div class="question">
        <strong>1. Pourquoi utilise-t-on "===" au lieu de "=="?</strong>
        <p>L'op√©rateur === (√©galit√© stricte) compare √† la fois la valeur ET le type, tandis que == (√©galit√© faible) effectue une conversion de type avant la comparaison. === est plus s√ªr et recommand√© en TypeScript/JavaScript.</p>
      </div>

      <div class="question">
        <strong>2. √Ä quoi sert la directive *ngFor?</strong>
        <ul>
          <li>Afficher une liste dynamique d'√©l√©ments</li>
          <li>Cr√©er un √©l√©ment HTML pour chaque item d'un tableau</li>
          <li>G√©n√©rer des tableaux, listes ou grilles √† partir de donn√©es</li>
        </ul>
      </div>

      <div class="question">
        <strong>3. Pourquoi utiliser *ngIf pour les d√©tails?</strong>
        <p>Sans *ngIf, Angular essaierait d'afficher selectedEtudiant.name m√™me quand selectedEtudiant est undefined, ce qui causerait une erreur. *ngIf emp√™che le rendu du bloc tant que la condition n'est pas remplie.</p>
      </div>
    </div>
  </div>
</div>
